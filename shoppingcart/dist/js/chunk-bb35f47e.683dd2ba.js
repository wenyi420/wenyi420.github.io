(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb35f47e"],{1894:function(t,e,a){},1897:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"pageTitle"},[t._v("編輯訂單")]),a("div",{staticClass:"editList"},[a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("姓名")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"name",value:t.orderData.name}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("電話")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"phone",value:t.orderData.phone}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("信箱")])]),a("b-col",{attrs:{sm:"6"}},[a("b-form-input",{attrs:{id:"email",value:t.orderData.email}})],1)],1),a("b-row",{staticClass:"my-3"},[a("b-col",{staticClass:"inputLabel",attrs:{sm:"2",lg:"1"}},[a("label",[t._v("狀態")])]),a("b-col",{staticClass:"radio-content",attrs:{sm:"6"}},[a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!0},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("已付款")]),a("b-form-radio",{staticClass:"radio-item",attrs:{name:"some-radios",value:!1},model:{value:t.orderData.isPay,callback:function(e){t.$set(t.orderData,"isPay",e)},expression:"orderData.isPay"}},[t._v("未付款")])],1)],1)],1),t.orderMovieList?a("div",{staticClass:"cart-list"},t._l(t.orderMovieList,(function(e,r){return a("editOrderMovies",{key:e.id,attrs:{item:e,index:r},on:{DELETE_MOVIE:t.deleteHanlder,CHANGE_AMOUNT:t.changeAmountHandler}})})),1):t._e(),a("div",{staticClass:"btn-list"},[a("b-button",{staticClass:"btn",attrs:{variant:"secondary"},on:{click:t.goToBack}},[t._v("返回")]),a("b-button",{staticClass:"btn",attrs:{variant:"success"},on:{click:t.editUpdate}},[t._v("送出")])],1)],1)])},i=[],n=(a("d81d"),a("13d5"),a("a434"),a("b0c0"),a("aa00")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{staticClass:"photo item-left"},[t.item.movieImg?a("img",{attrs:{src:"https://image.tmdb.org/t/p/w500/"+t.item.movieImg,alt:""}}):a("img",{attrs:{alt:"找不到該圖片",src:"https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"}})]),a("div",{staticClass:"item-right"},[a("p",{staticClass:"title"},[t._v(t._s(t.item.name))]),a("p",{staticClass:"quantity"},[a("span",{staticClass:"quantity-btn decrease",on:{click:t.changeAmount}},[t._v("-")]),a("input",{attrs:{type:"text",disabled:""},domProps:{value:t.item.Quantity}}),a("span",{staticClass:"quantity-btn increase",on:{click:t.changeAmount}},[t._v("+")])]),a("p",{staticClass:"price"},[t._v("$ "+t._s(t.item.price*t.item.Quantity))]),a("van-icon",{staticClass:"\n      delete",attrs:{name:"clear"},on:{click:t.deleteCartItem}})],1)])},o=[],c=(a("a9e3"),{name:"editOrderMovie",props:{item:{type:Object,required:!0},index:{type:Number,require:!0}},methods:{changeAmount:function(t){var e=this.item;if(t.target.classList.contains("decrease")){if(1===e.Quantity)return;e.Quantity--}t.target.classList.contains("increase")&&e.Quantity++;var a=e.Quantity*e.price;this.$emit("CHANGE_AMOUNT",{index:this.index,Quantity:e.Quantity,totalPrice:a})},deleteCartItem:function(){console.log("index",this.index),this.$emit("DELETE_MOVIE",this.index)}}}),u=c,l=(a("2f17"),a("2877")),d=Object(l["a"])(u,s,o,!1,null,null,null),m=d.exports,f={name:"editOrder",data:function(){return{orderData:{},orderMovieList:[]}},components:{editOrderMovies:m},beforeCreate:function(){var t=this,e=this.$route.params.orderID;Object(n["c"])(e).then((function(e){t.orderData=e.data,t.orderMovieList=e.data.movie})).catch((function(t){console.log(t)}))},methods:{deleteHanlder:function(t){this.orderMovieList.splice(t,1)},changeAmountHandler:function(t){console.log("emit obj =",t);var e=this.orderMovieList[t.index];e.Quantity=t.Quantity,e.totalPrice=t.totalPrice},editUpdate:function(){var t=this,e=document.querySelector("#name").value,a=document.querySelector("#email").value,r=document.querySelector("#phone").value;this.orderData.name=e,this.orderData.email=a,this.orderData.phone=r;var i=this.$route.params.orderID;Object(n["f"])(i,this.orderData).then((function(){t.goToBack()})).catch((function(t){console.log(t)}))},goToBack:function(){this.$router.push("/admin/orderList")}},computed:{getTotalPrice:function(){return this.orderMovieList.map((function(t){return t.totalPrice})).reduce((function(t,e){return t+e}),0)}},watch:{getTotalPrice:function(){this.orderData.totalPrice=this.getTotalPrice}}},p=f,v=(a("93c8"),Object(l["a"])(p,r,i,!1,null,"19d6625a",null));e["default"]=v.exports},2019:function(t,e,a){},"2f17":function(t,e,a){"use strict";var r=a("2019"),i=a.n(r);i.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),n="["+i+"]",s=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var r=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var n,s;return i&&"function"==typeof(n=e.constructor)&&n!==a&&r(s=n.prototype)&&s!==a.prototype&&i(t,s),t}},"93c8":function(t,e,a){"use strict";var r=a("1894"),i=a.n(r);i.a},a9e3:function(t,e,a){"use strict";var r=a("83ab"),i=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),c=a("c6b6"),u=a("7156"),l=a("c04e"),d=a("d039"),m=a("7c73"),f=a("241c").f,p=a("06cf").f,v=a("9bf2").f,b=a("58a8").trim,h="Number",g=i[h],y=g.prototype,C=c(m(y))==h,_=function(t){var e,a,r,i,n,s,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(n=u.slice(2),s=n.length,o=0;o<s;o++)if(c=n.charCodeAt(o),c<48||c>i)return NaN;return parseInt(n,r)}return+u};if(n(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var I,E=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof E&&(C?d((function(){y.valueOf.call(a)})):c(a)!=h)?u(new g(_(e)),a,E):_(e)},N=r?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;N.length>O;O++)o(g,I=N[O])&&!o(E,I)&&v(E,I,p(g,I));E.prototype=y,y.constructor=E,s(i,h,E)}},aa00:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return l}));var r=a("c682"),i="https://vueshopcart.herokuapp.com",n=function(){return Object(r["a"])("get","".concat(i,"/orderlist"))},s=function(t){return Object(r["a"])("delete","".concat(i,"/orderlist/").concat(t))},o=function(t){return Object(r["a"])("get","".concat(i,"/orderlist/").concat(t))},c=function(t,e){return Object(r["a"])("patch","".concat(i,"/orderlist/").concat(t),e)},u=function(t){return Object(r["a"])("post","".concat(i,"/orderlist"),t)},l=function(){return Object(r["a"])("get","".concat(i,"/admin"))}},d81d:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").map,n=a("1dde"),s=a("ae40"),o=n("map"),c=s("map");r({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-bb35f47e.683dd2ba.js.map